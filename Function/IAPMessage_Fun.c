/***************************************************************************************************
*FileName:IAPMessage_Fun
*Description:控制升级界面
*Author:xsx
*Data:2017年2月20日14:31:24
***************************************************************************************************/


/***************************************************************************************************/
/******************************************头文件***************************************************/
/***************************************************************************************************/
#include	"IAPMessage_Fun.h"

#include	"LCD_Driver.h"

#include	"Define.h"

#include	<string.h>
#include	"stdio.h"
#include 	"stdlib.h"

/***************************************************************************************************/
/**************************************局部变量声明*************************************************/
/***************************************************************************************************/
static char buf[300];
/***************************************************************************************************/
/**************************************局部函数声明*************************************************/
/***************************************************************************************************/

/***************************************************************************************************/
/***************************************************************************************************/
/***************************************正文********************************************************/
/***************************************************************************************************/
/***************************************************************************************************/
/***************************************************************************************************/

void clearStatusText(void)
{
	memset(buf, 0, 300);
	DisText(0x2a20, buf, 240);
}

void showIapStatus(char * statusStr)
{
	strcat(buf, statusStr);
	DisText(0x2a20, buf, strlen(buf));
}


void showIapProgess(unsigned char num)
{
	float value = num;
	value *= 3.65;
	
	BasicPic(0x2a00, 1, 137, 326, 291, 326+value, 305, 392, 399);
}

void hideIapProgess(void)
{
	BasicPic(0x2a00, 0, 137, 326, 291, 326, 305, 392, 399);
}

void showIapVersion(unsigned short firmwareVersion, unsigned short bootVersion)
{
	char tempbuf[50];

	sprintf(tempbuf, "%d.%d.%02d\0", firmwareVersion/1000, firmwareVersion%1000/100, firmwareVersion%100);

	DisText(0x2a10, tempbuf, strlen(tempbuf)+1);
	
	sprintf(tempbuf, "%d.%d.%02d\0", bootVersion/1000, bootVersion%1000/100, bootVersion%100);

	DisText(0x2a18, tempbuf, strlen(tempbuf)+1);
}


